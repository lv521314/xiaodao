<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âœ¨å°å²›è‡ªåŠ¨æŠ¢å•å·¥å…· - ä¸“ä¸šç‰ˆâœ¨</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #6c5ce7;
            --primary-light: #a29bfe;
            --secondary-color: #fd79a8;
            --success-color: #00b894;
            --warning-color: #fdcb6e;
            --danger-color: #d63031;
            --dark-color: #2d3436;
            --light-color: #f8f9fa;
            --gray-color: #636e72;
            --border-color: #dfe6e9;
            --card-bg: rgba(255, 255, 255, 0.9);
            --body-bg: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --sidebar-bg: linear-gradient(135deg, #3a416f 0%, #141a31 100%);
            --sidebar-text: #e2e2e2;
            --sidebar-active: #6c5ce7;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            --shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            --glow: 0 0 15px rgba(108, 92, 231, 0.4);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: var(--body-bg);
            color: var(--dark-color);
            line-height: 1.6;
            min-height: 100vh;
            background-attachment: fixed;
        }
        
        .app-container {
            display: flex;
            min-height: 100vh;
        }
        
        .sidebar {
            width: 280px;
            background: var(--sidebar-bg);
            color: var(--sidebar-text);
            padding: 25px 0;
            transition: var(--transition);
            box-shadow: var(--shadow);
            position: relative;
            z-index: 10;
        }
        
        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #6c5ce7, #fd79a8, #00b894);
        }
        
        .sidebar-header {
            padding: 0 25px 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .sidebar-header h2 {
            color: white;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .sidebar-header h2 i {
            margin-right: 10px;
            color: var(--primary-color);
        }
        
        .sidebar-menu {
            list-style: none;
        }
        
        .sidebar-menu li {
            margin-bottom: 5px;
            position: relative;
        }
        
        .sidebar-menu li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 3px;
            background: var(--primary-color);
            transform: scaleY(0);
            transition: var(--transition);
        }
        
        .sidebar-menu li:hover::before {
            transform: scaleY(1);
        }
        
        .sidebar-menu a {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            color: var(--sidebar-text);
            text-decoration: none;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .sidebar-menu a::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        }
        
        .sidebar-menu a:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: white;
            transform: translateX(5px);
        }
        
        .sidebar-menu a.active {
            background-color: rgba(108, 92, 231, 0.2);
            color: white;
        }
        
        .sidebar-menu a.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 3px;
            background: var(--primary-color);
        }
        
        .sidebar-menu i {
            margin-right: 12px;
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .header h1 {
            color: var(--dark-color);
            font-size: 1.8rem;
            font-weight: 600;
            background: linear-gradient(90deg, #6c5ce7, #fd79a8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            display: inline-block;
        }
        
        .header h1::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, #6c5ce7, #fd79a8);
            border-radius: 3px;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 8px 15px;
            border-radius: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
        }
        
        .user-profile:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        }
        
        .user-profile img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
            border: 2px solid var(--primary-color);
        }
        
        .user-profile .user-info {
            display: flex;
            flex-direction: column;
        }
        
        .user-profile .user-name {
            font-weight: 500;
            font-size: 0.9rem;
            color: var(--dark-color);
        }
        
        .user-profile .user-role {
            font-size: 0.8rem;
            color: var(--gray-color);
        }
        
        .card {
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        .card:hover {
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
            transform: translateY(-5px);
        }
        
        .card-header {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }
        
        .card-header h3 {
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--dark-color);
            display: flex;
            align-items: center;
        }
        
        .card-header h3 i {
            margin-right: 10px;
            color: var(--primary-color);
            font-size: 1.1rem;
        }
        
        .card-body {
            padding: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-color);
            font-size: 0.95rem;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 0.95rem;
            transition: var(--transition);
            background-color: rgba(255, 255, 255, 0.8);
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.2);
            background-color: white;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 500;
            transition: var(--transition);
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            opacity: 0;
            transition: var(--transition);
            z-index: -1;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(108, 92, 231, 0.3);
        }
        
        .btn:hover::before {
            opacity: 1;
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success-color), #00cec9);
        }
        
        .btn-success::before {
            background: linear-gradient(135deg, #00cec9, var(--success-color));
        }
        
        .btn-success:hover {
            box-shadow: 0 10px 20px rgba(0, 184, 148, 0.3);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, var(--warning-color), #e17055);
        }
        
        .btn-warning::before {
            background: linear-gradient(135deg, #e17055, var(--warning-color));
        }
        
        .btn-warning:hover {
            box-shadow: 0 10px 20px rgba(253, 203, 110, 0.3);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, var(--danger-color), #e84393);
        }
        
        .btn-danger::before {
            background: linear-gradient(135deg, #e84393, var(--danger-color));
        }
        
        .btn-danger:hover {
            box-shadow: 0 10px 20px rgba(214, 48, 49, 0.3);
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-outline:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            position: relative;
            padding-left: 50px;
            background: rgba(255, 255, 255, 0.9);
            border-left: 4px solid;
        }
        
        .alert i {
            position: absolute;
            left: 15px;
            top: 15px;
            font-size: 1.2rem;
        }
        
        .alert-success {
            border-left-color: var(--success-color);
            color: #00695c;
        }
        
        .alert-success i {
            color: var(--success-color);
        }
        
        .alert-info {
            border-left-color: var(--primary-color);
            color: #3d348b;
        }
        
        .alert-info i {
            color: var(--primary-color);
        }
        
        .alert-warning {
            border-left-color: var(--warning-color);
            color: #b35a00;
        }
        
        .alert-warning i {
            color: var(--warning-color);
        }
        
        .alert-danger {
            border-left-color: var(--danger-color);
            color: #a4135c;
        }
        
        .alert-danger i {
            color: var(--danger-color);
        }
        
        .status-panel {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
            max-height: 300px;
            overflow-y: auto;
            padding: 15px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.05);
        }
        
        .status-item {
            padding: 12px;
            margin-bottom: 10px;
            background: white;
            border-radius: 6px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
            border-left: 3px solid;
        }
        
        .status-item:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transform: translateX(5px);
        }
        
        .status-item:last-child {
            margin-bottom: 0;
        }
        
        .status-item.info {
            border-left-color: var(--primary-color);
        }
        
        .status-item.success {
            border-left-color: var(--success-color);
        }
        
        .status-item.warning {
            border-left-color: var(--warning-color);
        }
        
        .status-item.danger {
            border-left-color: var(--danger-color);
        }
        
        .status-time {
            font-size: 0.8rem;
            color: var(--gray-color);
            margin-bottom: 5px;
        }
        
        .status-message {
            font-size: 0.95rem;
        }
        
        .keyword-shortcuts {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .keyword-btn {
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.85rem;
            position: relative;
            overflow: hidden;
        }
        
        .keyword-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(108, 92, 231, 0.1), rgba(253, 121, 168, 0.1));
            opacity: 0;
            transition: var(--transition);
        }
        
        .keyword-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        
        .keyword-btn:hover::before {
            opacity: 1;
        }
        
        .keyword-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            box-shadow: 0 4px 10px rgba(108, 92, 231, 0.3);
        }
        
        .keyword-btn.active::before {
            opacity: 1;
            background: linear-gradient(135deg, rgba(108, 92, 231, 0.3), rgba(253, 121, 168, 0.3));
        }
        
        .hidden {
            display: none;
        }
        
        .config-summary {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            border-left: 4px solid var(--primary-color);
            box-shadow: var(--shadow);
            position: relative;
        }
        
        .config-summary::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        .config-row {
            display: flex;
            margin-bottom: 10px;
            padding: 10px 0;
            border-bottom: 1px dashed var(--border-color);
        }
        
        .config-row:last-child {
            border-bottom: none;
        }
        
        .config-row.horizontal {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .config-row.horizontal .config-item {
            flex: 1;
            min-width: 200px;
        }
        
        .config-label {
            font-weight: 500;
            min-width: 120px;
            color: var(--gray-color);
            font-size: 0.9rem;
        }
        
        .config-value {
            flex-grow: 1;
            color: var(--dark-color);
        }
        
        .record-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 15px;
            box-shadow: var(--shadow);
            border-radius: 10px;
            overflow: hidden;
            background: white;
        }
        
        .record-table th,
        .record-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        .record-table th {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            font-weight: 500;
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 0.5px;
        }
        
        .record-table tr:last-child td {
            border-bottom: none;
        }
        
        .record-table tr:hover td {
            background-color: #f8f9fa;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .badge-primary {
            background: rgba(108, 92, 231, 0.1);
            color: var(--primary-color);
            border: 1px solid rgba(108, 92, 231, 0.3);
        }
        
        .badge-success {
            background: rgba(0, 184, 148, 0.1);
            color: var(--success-color);
            border: 1px solid rgba(0, 184, 148, 0.3);
        }
        
        .badge-warning {
            background: rgba(253, 203, 110, 0.1);
            color: #b35a00;
            border: 1px solid rgba(253, 203, 110, 0.3);
        }
        
        .badge-danger {
            background: rgba(214, 48, 49, 0.1);
            color: var(--danger-color);
            border: 1px solid rgba(214, 48, 49, 0.3);
        }
        
        .badge-q {
            background: rgba(108, 92, 231, 0.1);
            color: var(--primary-color);
            border-left: 3px solid var(--primary-color);
        }
        
        .badge-v {
            background: rgba(253, 121, 168, 0.1);
            color: var(--secondary-color);
            border-left: 3px solid var(--secondary-color);
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #ccc;
            transition: var(--transition);
            border-radius: 24px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background: white;
            transition: var(--transition);
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        .toggle-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .toggle-label {
            margin-left: 10px;
            font-size: 0.9rem;
            color: var(--dark-color);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(108, 92, 231, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(108, 92, 231, 0); }
            100% { box-shadow: 0 0 0 0 rgba(108, 92, 231, 0); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        .glow {
            box-shadow: 0 0 15px rgba(108, 92, 231, 0.4);
        }
        
        .text-muted {
            color: var(--gray-color);
            font-style: italic;
        }
        
        @media (max-width: 992px) {
            .app-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                padding: 15px;
            }
            
            .sidebar-menu {
                display: flex;
                overflow-x: auto;
                padding-bottom: 10px;
            }
            
            .sidebar-menu li {
                margin-bottom: 0;
                margin-right: 10px;
            }
            
            .sidebar-menu a {
                white-space: nowrap;
                border-left: none;
                border-bottom: 3px solid transparent;
                padding: 10px 15px;
            }
            
            .sidebar-menu a.active {
                border-left: none;
                border-bottom: 3px solid var(--primary-color);
            }
            
            .main-content {
                padding: 20px;
            }
        }
        
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .user-profile {
                margin-top: 15px;
            }
            
            .config-row.horizontal .config-item {
                min-width: 100%;
            }
            
            .keyword-shortcuts {
                gap: 8px;
            }
            
            .keyword-btn {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- ä¾§è¾¹æ å¯¼èˆª -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-bolt"></i> å°å²›æŠ¢å•å·¥å…·</h2>
            </div>
            <ul class="sidebar-menu">
                <li><a href="#" class="active" data-tab="dashboard"><i class="fas fa-tachometer-alt"></i> æ§åˆ¶é¢æ¿</a></li>
                <li><a href="#" data-tab="user-config"><i class="fas fa-user-cog"></i> ç”¨æˆ·è®¾ç½®</a></li>
                <li><a href="#" data-tab="order-config"><i class="fas fa-cog"></i> è®¢å•è®¾ç½®</a></li>
                <li><a href="#" data-tab="records"><i class="fas fa-clipboard-list"></i> æˆåŠŸè®°å½•</a></li>
                <li><a href="#" data-tab="help"><i class="fas fa-question-circle"></i> ä½¿ç”¨å¸®åŠ©</a></li>
            </ul>
        </div>
        
        <!-- ä¸»å†…å®¹åŒº -->
        <div class="main-content">
            <div class="header">
                <h1>âœ¨å°å²›è‡ªåŠ¨æŠ¢å•å·¥å…· - ä¸“ä¸šç‰ˆâœ¨</h1>
                <div class="user-profile">
                    <img src="https://xiaolatiao.oss-cn-beijing.aliyuncs.com/uploadImg-test/wYp4xWmXfR.jpg" alt="ç”¨æˆ·å¤´åƒ">
                    <div class="user-info">
                        <span class="user-name">å°å²›ã€æ²¡å›-åœ¨ç¡è§‰ã€‘</span>
                        <span class="user-role">VIPç”¨æˆ·</span>
                    </div>
                </div>
            </div>
            
            <!-- ä»ªè¡¨ç›˜æ ‡ç­¾é¡µ -->
            <div id="dashboard-tab" class="tab-content active">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-info-circle"></i> å½“å‰çŠ¶æ€</h3>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i>
                            <strong>ç³»ç»ŸçŠ¶æ€ï¼š</strong> å·¥å…·å·²å°±ç»ªï¼Œç­‰å¾…å¼€å§‹æŠ¢å•
                        </div>
                        <div class="config-summary">
                            <h4><i class="fas fa-cog"></i> å½“å‰é…ç½®æ¦‚è§ˆ</h4>
                            <div id="currentConfig"></div>
                        </div>
                    </div>
                </div>
                
                <!-- æ“ä½œæ—¥å¿— -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-history"></i> æ“ä½œæ—¥å¿—</h3>
                    </div>
                    <div class="card-body">
                        <div class="status-panel" id="statusPanel">
                            <div class="status-item info">
                                <div class="status-time">[ç³»ç»Ÿ] 2023-07-20 14:30:25</div>
                                <div class="status-message">å·¥å…·åˆå§‹åŒ–å®Œæˆï¼Œç­‰å¾…å¼€å§‹æŠ¢å•...</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- æŠ¢å•ç»Ÿè®¡ -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-chart-line"></i> æŠ¢å•ç»Ÿè®¡</h3>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle"></i>
                            <strong>ä»Šæ—¥æˆ˜ç»©ï¼š</strong> å·²æˆåŠŸæŠ¢åˆ° <strong>5</strong> å•ï¼Œæ€»é‡‘é¢ <strong>Â¥125.00</strong>
                        </div>
                    </div>
                </div>
                
                <!-- æŠ¢å•å‚æ•°è®¾ç½® -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-cog"></i> æŠ¢å•å‚æ•°è®¾ç½®</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <div class="toggle-group">
                                <label class="switch">
                                    <input type="checkbox" id="autoStopToggle" checked>
                                    <span class="slider"></span>
                                </label>
                                <span class="toggle-label">æŠ¢åˆ°ä¸€å•åè‡ªåŠ¨åœæ­¢</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <button id="startGrabBtn" class="btn btn-block pulse">ğŸš€ å¼€å§‹æŠ¢å•</button>
                            <button id="stopGrabBtn" class="btn btn-danger btn-block hidden">ğŸ›‘ åœæ­¢æŠ¢å•</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ç”¨æˆ·è®¾ç½®æ ‡ç­¾é¡µ -->
            <div id="user-config-tab" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-user-cog"></i> ç”¨æˆ·ä¿¡æ¯é…ç½®</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="memberId">memberId</label>
                            <input type="text" id="memberId" class="form-control" placeholder="è¯·è¾“å…¥ memberId">
                        </div>
                        <div class="form-group">
                            <label for="ids">ids</label>
                            <input type="text" id="ids" class="form-control" placeholder="è¯·è¾“å…¥ ids">
                        </div>
                        <div class="form-group">
                            <label for="nickname">nickname</label>
                            <input type="text" id="nickname" class="form-control" placeholder="è¯·è¾“å…¥ nickname">
                        </div>
                        <div class="form-group">
                            <label for="token">token</label>
                            <input type="text" id="token" class="form-control" placeholder="è¯·è¾“å…¥ token">
                        </div>
                        <div class="form-group">
                            <button id="saveUserConfigBtn" class="btn btn-success btn-block">ğŸ’¾ ä¿å­˜ç”¨æˆ·é…ç½®</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- è®¢å•è®¾ç½®æ ‡ç­¾é¡µ -->
            <div id="order-config-tab" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-cog"></i> è®¢å•è®¾ç½®</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="delayMs">æŠ¢å•å»¶è¿Ÿ (æ¯«ç§’)</label>
                            <input type="number" id="delayMs" class="form-control" min="0" max="1000" value="300" placeholder="100-600ä¹‹é—´">
                            <small class="text-muted">å»ºè®®å€¼: 100-600ms</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="areaFilter">åŒºåŸŸç­›é€‰</label>
                            <select id="areaFilter" class="form-control">
                                <option value="-1">å…¨éƒ¨åŒºåŸŸ</option>
                                <option value="1">QåŒº</option>
                                <option value="0">VåŒº</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>å¿«æ·å…³é”®è¯ (å¤šé€‰):</label>
                            <div class="keyword-shortcuts" id="keywordShortcuts">
                                <button class="keyword-btn" data-keywords="å¼€è’å•">1: å¼€è’å•</button>
                                <button class="keyword-btn" data-keywords="æŠ¤èˆªåŠ å¼ºå•">2: æŠ¤èˆªåŠ å¼ºå•</button>
                                <button class="keyword-btn" data-keywords="æš‘å‡å¿«ä¹å•">3: æš‘å‡å¿«ä¹å•</button>
                                <button class="keyword-btn" data-keywords="å®éªŒåŸºåœ°ä¸“å±">4: å®éªŒåŸºåœ°ä¸“å±</button>
                                <button class="keyword-btn" data-keywords="çƒ½ç«è£éƒ½ä¸“å±">5: çƒ½ç«è£éƒ½ä¸“å±</button>
                                <button class="keyword-btn" data-keywords="è‡³å°ŠæŠ¤èˆªå•">6: è‡³å°ŠæŠ¤èˆªå•</button>
                                <button class="keyword-btn" data-keywords="ç‹™å‡»ä¿±ä¹éƒ¨å•">7: ç‹™å‡»ä¿±ä¹éƒ¨å•</button>
                                <button class="keyword-btn" data-keywords="å¤§ç¥æŠ¤èˆªå•">8: å¤§ç¥æŠ¤èˆªå•</button>
                                <button class="keyword-btn" data-keywords="èµŒè¶…çº§æ— èµ„ç®±">9: èµŒè¶…çº§æ— èµ„ç®±</button>
                                <button class="keyword-btn" data-keywords="ä¿åº•BOSSå•">a: ä¿åº•BOSSå•</button>
                                <button class="keyword-btn" data-keywords="è‹å°”å—é’»çŸ³å•">b: è‹å°”å—é’»çŸ³å•</button>
                                <button class="keyword-btn" data-keywords="é¸¡è…¿">c: é¸¡è…¿</button>
                                <button class="keyword-btn" data-keywords="å¥¶èŒ¶">d: å¥¶èŒ¶</button>
                                <button class="keyword-btn" data-keywords="ç»™æ‰“æ‰‹åŠ æ±‰å ¡">e: ç»™æ‰“æ‰‹åŠ æ±‰å ¡</button>
                                <button class="keyword-btn" data-keywords="ç»™æ‰“æ‰‹åŠ é¸¡è…¿">f: ç»™æ‰“æ‰‹åŠ é¸¡è…¿</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="customKeywords">è‡ªå®šä¹‰å…³é”®è¯ (å¤šä¸ªå…³é”®è¯ç”¨é€—å·åˆ†éš”)</label>
                            <input type="text" id="customKeywords" class="form-control" placeholder="ä¾‹å¦‚: å¼€è’å•,æŠ¤èˆªå•">
                        </div>
                        <div class="form-group">
                            <button id="saveOrderConfigBtn" class="btn btn-success btn-block">ğŸ’¾ ä¿å­˜è®¢å•é…ç½®</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- æˆåŠŸè®°å½•æ ‡ç­¾é¡µ -->
            <div id="records-tab" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-clipboard-list"></i> æˆåŠŸè®°å½•</h3>
                    </div>
                    <div class="card-body">
                        <table class="record-table">
                            <thead>
                                <tr>
                                    <th>æ—¶é—´</th>
                                    <th>è®¢å•ID</th>
                                    <th>åŒºåŸŸ</th>
                                    <th>ç±»å‹</th>
                                    <th>é‡‘é¢</th>
                                    <th>å»¶è¿Ÿ</th>
                                </tr>
                            </thead>
                            <tbody id="recordsTable">
                                <tr>
                                    <td>2023-07-20 14:25:12</td>
                                    <td>ORD-123456</td>
                                    <td><span class="badge badge-q">QåŒº</span></td>
                                    <td>å¼€è’å•</td>
                                    <td>Â¥25.00</td>
                                    <td>300ms</td>
                                </tr>
                                <tr>
                                    <td>2023-07-20 13:45:33</td>
                                    <td>ORD-123455</td>
                                    <td><span class="badge badge-v">VåŒº</span></td>
                                    <td>æŠ¤èˆªåŠ å¼ºå•</td>
                                    <td>Â¥30.00</td>
                                    <td>250ms</td>
                                </tr>
                                <tr>
                                    <td>2023-07-20 12:30:18</td>
                                    <td>ORD-123454</td>
                                    <td><span class="badge badge-q">QåŒº</span></td>
                                    <td>æš‘å‡å¿«ä¹å•</td>
                                    <td>Â¥20.00</td>
                                    <td>350ms</td>
                                </tr>
                                <tr>
                                    <td>2023-07-20 11:15:42</td>
                                    <td>ORD-123453</td>
                                    <td><span class="badge badge-v">VåŒº</span></td>
                                    <td>å®éªŒåŸºåœ°ä¸“å±</td>
                                    <td>Â¥35.00</td>
                                    <td>400ms</td>
                                </tr>
                                <tr>
                                    <td>2023-07-20 10:05:27</td>
                                    <td>ORD-123452</td>
                                    <td><span class="badge badge-q">QåŒº</span></td>
                                    <td>çƒ½ç«è£éƒ½ä¸“å±</td>
                                    <td>Â¥15.00</td>
                                    <td>280ms</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- ä½¿ç”¨å¸®åŠ©æ ‡ç­¾é¡µ -->
            <div id="help-tab" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-question-circle"></i> ä½¿ç”¨å¸®åŠ©</h3>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i>
                            <strong>å°å²›è‡ªåŠ¨æŠ¢å•å·¥å…·ä½¿ç”¨æŒ‡å—</strong>
                        </div>
                        
                        <h4><i class="fas fa-book"></i> åŸºæœ¬è®¾ç½®</h4>
                        <p>1. åœ¨"ç”¨æˆ·è®¾ç½®"é¡µé¢å¡«å†™æ‚¨çš„ memberIdã€idsã€nickname å’Œ token ä¿¡æ¯</p>
                        <p>2. åœ¨"è®¢å•è®¾ç½®"é¡µé¢é…ç½®æŠ¢å•å»¶è¿Ÿå’Œç­›é€‰æ¡ä»¶</p>
                        <p>3. ç‚¹å‡»"å¼€å§‹æŠ¢å•"æŒ‰é’®å¯åŠ¨è‡ªåŠ¨æŠ¢å•åŠŸèƒ½</p>
                        
                        <h4><i class="fas fa-lightbulb"></i> ä½¿ç”¨æŠ€å·§</h4>
                        <p>- æŠ¢å•å»¶è¿Ÿå»ºè®®è®¾ç½®åœ¨100-600msä¹‹é—´ï¼Œå¤ªä½å®¹æ˜“è¢«æ£€æµ‹ï¼Œå¤ªé«˜æŠ¢ä¸åˆ°å•</p>
                        <p>- ä½¿ç”¨å…³é”®è¯ç­›é€‰å¯ä»¥ç²¾å‡†æŠ¢åˆ°æ‚¨æƒ³è¦çš„è®¢å•ç±»å‹</p>
                        <p>- å¼€å¯"æŠ¢åˆ°ä¸€å•åè‡ªåŠ¨åœæ­¢"å¯ä»¥é¿å…é‡å¤æŠ¢å•</p>
                        
                        <h4><i class="fas fa-exclamation-triangle"></i> æ³¨æ„äº‹é¡¹</h4>
                        <p>- è¯·å‹¿è®¾ç½®è¿‡ä½çš„å»¶è¿Ÿæ—¶é—´ï¼Œå¯èƒ½å¯¼è‡´è´¦å·å¼‚å¸¸</p>
                        <p>- å®šæœŸæ£€æŸ¥å·¥å…·æ›´æ–°ï¼Œç¡®ä¿åŠŸèƒ½æ­£å¸¸</p>
                        <p>- æœ¬å·¥å…·ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œè¯·å‹¿ç”¨äºéæ³•ç”¨é€”</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        const BASE_URL = "https://paidan.xlt666.club/yxdl/api";
        const ORDER_LIST_URL = `${BASE_URL}/order/list?pageSize=10&pageNum=1&categoryId=0`;
        const TAKE_ORDER_URL = `${BASE_URL}/order/takeOrder`;
        
        let isGrabbing = false;
        let grabInterval;
        let lastOrders = [];
        let successRecords = [];
        let stopAfterSuccess = true; // æŠ¢åˆ°ä¸€å•åè‡ªåŠ¨åœæ­¢
        
        // DOMå…ƒç´ 
        const memberIdInput = document.getElementById('memberId');
        const idsInput = document.getElementById('ids');
        const nicknameInput = document.getElementById('nickname');
        const tokenInput = document.getElementById('token');
        const delayMsInput = document.getElementById('delayMs');
        const areaFilterSelect = document.getElementById('areaFilter');
        const customKeywordsInput = document.getElementById('customKeywords');
        const saveUserConfigBtn = document.getElementById('saveUserConfigBtn');
        const saveOrderConfigBtn = document.getElementById('saveOrderConfigBtn');
        const startGrabBtn = document.getElementById('startGrabBtn');
        const stopGrabBtn = document.getElementById('stopGrabBtn');
        const statusPanel = document.getElementById('statusPanel');
        const recordsTable = document.getElementById('recordsTable');
        const currentConfigDiv = document.getElementById('currentConfig');
        const keywordShortcuts = document.getElementById('keywordShortcuts');
        const autoStopToggle = document.getElementById('autoStopToggle');
        
        // ä¾§è¾¹æ èœå•é¡¹
        const menuItems = document.querySelectorAll('.sidebar-menu a');
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadConfig();
            setupEventListeners();
            updateCurrentConfigDisplay();
            loadSuccessRecords();
            
            // è®¾ç½®è‡ªåŠ¨åœæ­¢å¼€å…³çŠ¶æ€
            autoStopToggle.checked = stopAfterSuccess;
        });
        
        function setupEventListeners() {
            // ä¿å­˜ç”¨æˆ·é…ç½®
            saveUserConfigBtn.addEventListener('click', saveUserConfig);
            
            // ä¿å­˜è®¢å•é…ç½®
            saveOrderConfigBtn.addEventListener('click', saveOrderConfig);
            
            // å¼€å§‹/åœæ­¢æŠ¢å•
            startGrabBtn.addEventListener('click', startGrabbing);
            stopGrabBtn.addEventListener('click', stopGrabbing);
            
            // å…³é”®è¯å¿«æ·æŒ‰é’® - å¤šé€‰æ¨¡å¼
            keywordShortcuts.querySelectorAll('.keyword-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.classList.toggle('active');
                    updateKeywordsFromButtons();
                });
            });
            
            // ä¾§è¾¹æ èœå•ç‚¹å‡»
            menuItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // æ›´æ–°èœå•é¡¹çŠ¶æ€
                    menuItems.forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    
                    // æ˜¾ç¤ºå¯¹åº”çš„æ ‡ç­¾é¡µ
                    const tabId = this.getAttribute('data-tab');
                    document.querySelectorAll('.tab-content').forEach(tab => {
                        tab.classList.remove('active');
                    });
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                    
                    // å¦‚æœåˆ‡æ¢åˆ°è®°å½•tabï¼Œåˆ·æ–°è®°å½•æ˜¾ç¤º
                    if (tabId === 'records') {
                        loadSuccessRecords();
                    }
                });
            });
            
            // è‡ªåŠ¨åœæ­¢å¼€å…³
            autoStopToggle.addEventListener('change', function() {
                stopAfterSuccess = this.checked;
                addStatusMessage(`æŠ¢åˆ°ä¸€å•åè‡ªåŠ¨åœæ­¢: ${stopAfterSuccess ? 'å¼€å¯' : 'å…³é—­'}`, 'info');
            });
        }
        
        // åŠ è½½é…ç½®
        function loadConfig() {
            const config = JSON.parse(localStorage.getItem('orderGrabberConfig')) || {};
            
            // ç”¨æˆ·é…ç½®
            memberIdInput.value = config.memberId || '';
            idsInput.value = config.ids || '';
            nicknameInput.value = config.nickname || '';
            tokenInput.value = config.token || '';
            
            // è®¢å•é…ç½®
            delayMsInput.value = config.delayMs || 300;
            areaFilterSelect.value = config.areaFilter !== undefined ? config.areaFilter : -1;
            customKeywordsInput.value = config.customKeywords || '';
            
            // æ¢å¤å…³é”®è¯æŒ‰é’®çŠ¶æ€ - å¤šé€‰æ¨¡å¼
            if (config.keywords && config.keywords.length > 0) {
                keywordShortcuts.querySelectorAll('.keyword-btn').forEach(btn => {
                    const btnKeywords = btn.getAttribute('data-keywords');
                    if (config.keywords.includes(btnKeywords)) {
                        btn.classList.add('active');
                    }
                });
            }
        }
        
        // ä¿å­˜ç”¨æˆ·é…ç½®
        function saveUserConfig() {
            const config = JSON.parse(localStorage.getItem('orderGrabberConfig')) || {};
            
            config.memberId = memberIdInput.value.trim();
            config.ids = idsInput.value.trim();
            config.nickname = nicknameInput.value.trim();
            config.token = tokenInput.value.trim();
            
            localStorage.setItem('orderGrabberConfig', JSON.stringify(config));
            addStatusMessage('ç”¨æˆ·é…ç½®å·²ä¿å­˜', 'success');
            updateCurrentConfigDisplay();
        }
        
        // ä¿å­˜è®¢å•é…ç½®
        function saveOrderConfig() {
            const config = JSON.parse(localStorage.getItem('orderGrabberConfig')) || {};
            
            config.delayMs = parseInt(delayMsInput.value) || 300;
            config.areaFilter = areaFilterSelect.value === '-1' ? null : parseInt(areaFilterSelect.value);
            config.customKeywords = customKeywordsInput.value.trim();
            config.keywords = getSelectedKeywords();
            
            localStorage.setItem('orderGrabberConfig', JSON.stringify(config));
            addStatusMessage('è®¢å•é…ç½®å·²ä¿å­˜', 'success');
            updateCurrentConfigDisplay();
        }
        
        // è·å–é€‰ä¸­çš„å…³é”®è¯
        function getSelectedKeywords() {
            const keywords = [];
            
            // ä»å¿«æ·æŒ‰é’®è·å–ï¼ˆå¤šé€‰æ¨¡å¼ï¼‰
            keywordShortcuts.querySelectorAll('.keyword-btn.active').forEach(btn => {
                keywords.push(btn.getAttribute('data-keywords'));
            });
            
            // ä»è‡ªå®šä¹‰è¾“å…¥è·å–
            if (customKeywordsInput.value.trim()) {
                customKeywordsInput.value.trim().split(',').forEach(kw => {
                    if (kw.trim()) keywords.push(kw.trim());
                });
            }
            
            return keywords;
        }
        
        // æ›´æ–°å…³é”®è¯æ˜¾ç¤º
        function updateKeywordsFromButtons() {
            const keywords = getSelectedKeywords();
            customKeywordsInput.value = keywords.join(', ');
        }
        
        // å¼€å§‹æŠ¢å•
        function startGrabbing() {
            const config = JSON.parse(localStorage.getItem('orderGrabberConfig')) || {};
            
            if (!config.token) {
                addStatusMessage('è¯·å…ˆé…ç½®tokenå¹¶ä¿å­˜', 'danger');
                return;
            }
            
            isGrabbing = true;
            startGrabBtn.classList.add('hidden');
            stopGrabBtn.classList.remove('hidden');
            addStatusMessage('å¼€å§‹æŠ¢å•...', 'info');
            
            // ç«‹å³æ£€æŸ¥ä¸€æ¬¡è®¢å•
            checkOrders();
            
            // è®¾ç½®å®šæ—¶æ£€æŸ¥
            grabInterval = setInterval(checkOrders, 3000); // æ¯3ç§’æ£€æŸ¥ä¸€æ¬¡
        }
        
        // åœæ­¢æŠ¢å•
        function stopGrabbing() {
            isGrabbing = false;
            clearInterval(grabInterval);
            startGrabBtn.classList.remove('hidden');
            stopGrabBtn.classList.add('hidden');
            addStatusMessage('å·²åœæ­¢æŠ¢å•', 'warning');
        }
        
        // æ£€æŸ¥è®¢å•
        async function checkOrders() {
            if (!isGrabbing) return;
            
            const config = JSON.parse(localStorage.getItem('orderGrabberConfig')) || {};
            
            try {
                addStatusMessage('æ­£åœ¨è·å–è®¢å•åˆ—è¡¨...', 'info');
                
                // çœŸå®APIè°ƒç”¨
                const orders = await fetchOrders(config);
                
                if (orders.length === 0) {
                    addStatusMessage('æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„è®¢å•', 'info');
                    return;
                }
                
                addStatusMessage(`æ‰¾åˆ° ${orders.length} ä¸ªç¬¦åˆæ¡ä»¶çš„è®¢å•`, 'info');
                
                // è¿‡æ»¤æ‰å·²ç»å¤„ç†è¿‡çš„è®¢å•
                const newOrders = orders.filter(order => 
                    !lastOrders.some(lastOrder => lastOrder.taskId === order.taskId)
                );
                
                if (newOrders.length === 0) {
                    addStatusMessage('æ²¡æœ‰æ–°è®¢å•', 'info');
                    return;
                }
                
                addStatusMessage(`å‘ç° ${newOrders.length} ä¸ªæ–°è®¢å•`, 'success');
                
                // å°è¯•æŠ¢å•
                for (const order of newOrders) {
                    if (!isGrabbing) break;
                    
                    addStatusMessage(`å°è¯•æŠ¢å•: ${order.taskName} (ID: ${order.taskId})`, 'info');
                    const success = await takeOrder(order.taskId, config);
                    
                    if (success) {
                        addStatusMessage(`æŠ¢å•æˆåŠŸ: ${order.taskName}`, 'success');
                        const orderDetail = await getOrderDetail(order.taskId, config.token);
                        saveSuccessRecord({
                            ...order,
                            ...orderDetail
                        }, config.delayMs);
                        
                        // æŠ¢åˆ°ä¸€å•åè‡ªåŠ¨åœæ­¢
                        if (stopAfterSuccess) {
                            stopGrabbing();
                            addStatusMessage('å·²è‡ªåŠ¨åœæ­¢æŠ¢å•ï¼Œå¦‚éœ€ç»§ç»­è¯·å†æ¬¡ç‚¹å‡»å¼€å§‹', 'info');
                        }
                        break; // æˆåŠŸæŠ¢åˆ°ä¸€ä¸ªè®¢å•åæš‚åœ
                    }
                }
                
                lastOrders = orders;
            } catch (error) {
                addStatusMessage(`è·å–è®¢å•å‡ºé”™: ${error.message}`, 'danger');
            }
        }
        
        // çœŸå®è·å–è®¢å•API
        async function fetchOrders(config) {
            try {
                const headers = {
                    "token": config.token
                };
                
                const response = await fetch(ORDER_LIST_URL, {
                    headers: headers
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.code !== 200) {
                    throw new Error(data.msg || 'è·å–è®¢å•å¤±è´¥');
                }
                
                const filteredOrders = [];
                const keywords = config.keywords || [];
                const areaFilter = config.areaFilter;
                
                for (const order of data.rows || []) {
                    // æ£€æŸ¥è®¢å•çŠ¶æ€
                    if (order.state !== 1) continue;
                    
                    // åŒºåŸŸç­›é€‰
                    let areaMatch = true;
                    if (areaFilter !== null) {
                        const catName = (order.categoryName || '').toLowerCase();
                        areaMatch = (areaFilter === 1 && catName.includes('qåŒº')) || 
                                    (areaFilter === 0 && catName.includes('våŒº'));
                    }
                    
                    if (!areaMatch) continue;
                    
                    // å…³é”®è¯ç­›é€‰
                    let keywordMatch = true;
                    if (keywords.length > 0) {
                        const taskName = (order.taskName || '').toLowerCase();
                        const taskDesc = (order.description || '').toLowerCase();
                        keywordMatch = keywords.some(kw => 
                            taskName.includes(kw.toLowerCase()) || 
                            taskDesc.includes(kw.toLowerCase())
                        );
                    }
                    
                    if (keywordMatch) {
                        filteredOrders.push(order);
                    }
                }
                
                return filteredOrders;
            } catch (error) {
                console.error('è·å–è®¢å•å‡ºé”™:', error);
                throw error;
            }
        }
        
        // çœŸå®æŠ¢å•API
        async function takeOrder(taskId, config) {
            try {
                addStatusMessage(`å‡†å¤‡æŠ¢å• â†’ ç­‰å¾… ${config.delayMs}ms å»¶è¿Ÿ...`, 'info');
                
                // åº”ç”¨å»¶è¿Ÿ
                await new Promise(resolve => setTimeout(resolve, config.delayMs));
                
                const headers = {
                    "token": config.token,
                    "Content-Type": "application/json"
                };
                
                const data = {
                    "taskId": taskId,
                    "memberId": config.memberId,
                    "ids": [config.ids],
                    "nickname": config.nickname,
                    "avatar": "https://xiaolatiao.oss-cn-beijing.aliyuncs.com/uploadImg-test/wYp4xWmXfR.jpg"
                };
                
                const response = await fetch(TAKE_ORDER_URL, {
                    method: 'POST',
                    headers: headers,
                    body: JSON.stringify(data)
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const result = await response.json();
                
                if (result.code === 200) {
                    return true;
                } else {
                    addStatusMessage(`æŠ¢å•å¤±è´¥ â†’ åŸå› : ${result.msg || 'æœªçŸ¥é”™è¯¯'}`, 'warning');
                    return false;
                }
            } catch (error) {
                console.error('æŠ¢å•å‡ºé”™:', error);
                addStatusMessage(`æŠ¢å•å‡ºé”™ â†’ ${error.message}`, 'danger');
                return false;
            }
        }
        
        // è·å–è®¢å•è¯¦æƒ…
        async function getOrderDetail(taskId, token) {
            try {
                const headers = {
                    "token": token
                };
                
                const detailUrl = `${BASE_URL}/order/getInfo?taskId=${taskId}`;
                const response = await fetch(detailUrl, {
                    headers: headers
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.code === 200) {
                    const order = data.data || {};
                    return {
                        'area': order.categoryName || "æœªçŸ¥åŒºåŸŸ",
                        'order_type': order.taskName || "æœªçŸ¥ç±»å‹",
                        'ddh': order.orderNo || "æœªçŸ¥å•å·",
                        'tmd': order.receivePrice || "æœªçŸ¥å‘å•é‡‘é¢",
                        'amount': order.outPrice || "æœªçŸ¥åˆ°æ‰‹é‡‘é¢",
                        'send_time': order.createTime || "æœªçŸ¥å‘å•æ—¶é—´"
                    };
                } else {
                    throw new Error(data.msg || 'è·å–è¯¦æƒ…å¤±è´¥');
                }
            } catch (error) {
                console.error('è·å–è¯¦æƒ…å¤±è´¥:', error);
                addStatusMessage(`è·å–è¯¦æƒ…å¤±è´¥ â†’ ${error.message}`, 'warning');
                return {
                    'area': 'æœªçŸ¥',
                    'order_type': 'æœªçŸ¥',
                    'amount': 'æœªçŸ¥'
                };
            }
        }
        
        // æ·»åŠ çŠ¶æ€æ¶ˆæ¯
        function addStatusMessage(message, type = 'info') {
            const now = new Date();
            const timeStr = now.toLocaleTimeString();
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `status-item ${type}`;
            
            let icon;
            switch(type) {
                case 'success': icon = 'check-circle'; break;
                case 'warning': icon = 'exclamation-triangle'; break;
                case 'danger': icon = 'times-circle'; break;
                default: icon = 'info-circle';
            }
            
            messageDiv.innerHTML = `
                <div class="status-time">[${timeStr}]</div>
                <div class="status-message"><i class="fas fa-${icon}"></i> ${message}</div>
            `;
            
            statusPanel.insertBefore(messageDiv, statusPanel.firstChild);
            
            // é™åˆ¶æ¶ˆæ¯æ•°é‡
            if (statusPanel.children.length > 50) {
                statusPanel.removeChild(statusPanel.lastChild);
            }
        }
        
        // ä¿å­˜æˆåŠŸè®°å½•
        function saveSuccessRecord(order, delayMs) {
            const record = {
                id: 'rec-' + Math.random().toString(36).substr(2, 8),
                time: new Date().toLocaleString(),
                taskId: order.taskId || 'æœªçŸ¥',
                area: order.area || 'æœªçŸ¥åŒºåŸŸ',
                type: order.order_type || 'æœªçŸ¥ç±»å‹',
                amount: order.amount || 'æœªçŸ¥',
                delay: delayMs + 'ms'
            };
            
            successRecords.unshift(record); // æ·»åŠ åˆ°å¼€å¤´
            localStorage.setItem('successRecords', JSON.stringify(successRecords));
            loadSuccessRecords();
        }
        
        // åŠ è½½æˆåŠŸè®°å½•
        function loadSuccessRecords() {
            const records = JSON.parse(localStorage.getItem('successRecords')) || [];
            successRecords = records;
            
            if (records.length === 0) {
                recordsTable.innerHTML = '<tr><td colspan="6">æš‚æ— è®°å½•</td></tr>';
                return;
            }
            
            let html = '';
            records.forEach(record => {
                const isQArea = record.area.includes('QåŒº') || record.area.includes('qåŒº');
                const areaBadge = isQArea ? 
                    '<span class="badge badge-q">QåŒº</span>' : 
                    '<span class="badge badge-v">VåŒº</span>';
                
                html += `
                    <tr>
                        <td>${record.time}</td>
                        <td>${record.taskId}</td>
                        <td>${areaBadge}</td>
                        <td>${record.type}</td>
                        <td>Â¥${record.amount}</td>
                        <td>${record.delay}</td>
                    </tr>
                `;
            });
            
            recordsTable.innerHTML = html;
        }
        
        // æ›´æ–°å½“å‰é…ç½®æ˜¾ç¤º
        function updateCurrentConfigDisplay() {
            const config = JSON.parse(localStorage.getItem('orderGrabberConfig')) || {};
            
            let html = `
                <div class="config-row horizontal">
                    <div class="config-item">
                        <div class="config-label">memberId:</div>
                        <div class="config-value">${config.memberId || '<span class="text-muted">æœªè®¾ç½®</span>'}</div>
                    </div>
                    <div class="config-item">
                        <div class="config-label">ids:</div>
                        <div class="config-value">${config.ids || '<span class="text-muted">æœªè®¾ç½®</span>'}</div>
                    </div>
                    <div class="config-item">
                        <div class="config-label">nickname:</div>
                        <div class="config-value">${config.nickname || '<span class="text-muted">æœªè®¾ç½®</span>'}</div>
                    </div>
                </div>
                <div class="config-row">
                    <div class="config-label">token:</div>
                    <div class="config-value">${config.token ? '<span class="badge badge-success">å·²è®¾ç½®</span>' : '<span class="badge badge-danger">æœªè®¾ç½®</span>'}</div>
                </div>
                <div class="config-row">
                    <div class="config-label">åŒºåŸŸç­›é€‰:</div>
                    <div class="config-value">${config.areaFilter === null ? 'å…¨é€‰' : config.areaFilter === 1 ? '<span class="badge badge-q">QåŒº</span>' : '<span class="badge badge-v">VåŒº</span>'}</div>
                </div>
                <div class="config-row">
                    <div class="config-label">å…³é”®è¯:</div>
                    <div class="config-value">${config.keywords && config.keywords.length > 0 ? config.keywords.map(kw => `<span class="badge badge-primary">${kw}</span>`).join(' ') : '<span class="text-muted">æ— </span>'}</div>
                </div>
                <div class="config-row">
                    <div class="config-label">æŠ¢å•å»¶è¿Ÿ:</div>
                    <div class="config-value"><span class="badge">${config.delayMs || 300}ms</span></div>
                </div>
                <div class="config-row">
                    <div class="config-label">è‡ªåŠ¨åœæ­¢:</div>
                    <div class="config-value">${stopAfterSuccess ? '<span class="badge badge-success">å¼€å¯</span>' : '<span class="badge badge-danger">å…³é—­</span>'}</div>
                </div>
            `;
            
            currentConfigDiv.innerHTML = html;
        }
    </script>
</body>
</html>